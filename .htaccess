RewriteEngine on  
RewriteCond $1 !^(index\.php|robots\.txt|public|upload)
RewriteRule ^(.*)$ index.php/$1 [L]